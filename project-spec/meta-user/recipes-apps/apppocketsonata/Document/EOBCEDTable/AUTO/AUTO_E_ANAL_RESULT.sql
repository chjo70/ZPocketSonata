DECLARE
    nCnt NUMBER;
BEGIN

    execute immediate 'drop SEQUENCE EW701.AUTO_E_ANAL_RESULT';
 
        
END;

CREATE SEQUENCE EW701.AUTO_E_ANAL_RESULT
  START WITH 2
  MAXVALUE 4294967294
  MINVALUE 1
  CYCLE
  NOCACHE
  NOORDER;

ALTER TABLE EW701.E_ANAL_RESULT
 DROP PRIMARY KEY CASCADE;

DROP TABLE EW701.E_ANAL_RESULT CASCADE CONSTRAINTS;

CREATE TABLE EW701.E_ANAL_RESULT
(
  ANAL_RSLT_ID         NUMBER(32)               NOT NULL,
  ACQ_TIME             TIMESTAMP(9)             NOT NULL,
  LINK_NUM             NUMBER                   NOT NULL,
  MISSION_ID           VARCHAR2(22 BYTE),
  TASK_ID              VARCHAR2(22 BYTE),
  TASK_NAME            VARCHAR2(64 BYTE),
  TASK_TYPE            NUMBER(1),
  SEARCH_BAND_ID       NUMBER                   NOT NULL,
  RXPATH               NUMBER(3)                NOT NULL,
  ANTDIRECTION         NUMBER(3)                NOT NULL,
  LOB_ID               NUMBER                   NOT NULL,
  ABT_ID               NUMBER                   NOT NULL,
  AET_ID               NUMBER                   NOT NULL,
  ELNOT_PRIM           VARCHAR2(12 BYTE),
  MODE_CODE_PRIM       VARCHAR2(12 BYTE),
  ELNOT_SECON          VARCHAR2(12 BYTE),
  MODE_CODE_SECON      VARCHAR2(12 BYTE),
  ELNOT_TERT           VARCHAR2(12 BYTE),
  MODE_CODE_TERT       VARCHAR2(12 BYTE),
  MODULATION_CODE      VARCHAR2(12 BYTE),
  NICK_NAME            VARCHAR2(64 BYTE),
  PRIM_FUNC_CODE       VARCHAR2(12 BYTE),
  SIG_TYPE             NUMBER(3)                NOT NULL,
  POLIZATION           NUMBER(1)                NOT NULL,
  RATIOOFPOL           NUMBER(4)                NOT NULL,
  FISINTTASK           NUMBER(1)                NOT NULL,
  NUM_OF_PULSE_GRP     NUMBER(6)                NOT NULL,
  NUM_OF_PULSES        NUMBER(6)                NOT NULL,
  BL_STAT              NUMBER(1)                NOT NULL,
  FOV                  NUMBER(5)                NOT NULL,
  DOA_MEAN             NUMBER                   NOT NULL,
  DOA_MIN              NUMBER                   NOT NULL,
  DOA_MAX              NUMBER                   NOT NULL,
  DOA_DEV              NUMBER                   NOT NULL,
  DOA_STD              NUMBER                   NOT NULL,
  DI_RATIO             NUMBER                   NOT NULL,
  FRQ_TYPE             NUMBER(1)                NOT NULL,
  FRQ_PATTN_TYPE       NUMBER(1)                NOT NULL,
  HAS_FRQ_MOD_PRD      NUMBER                   NOT NULL,
  FRQ_CHNG_PRD         NUMBER                   NOT NULL,
  NUM_OF_FRQ_POSITION  NUMBER(3)                NOT NULL,
  NUM_OF_FRQ_ELEMENT   NUMBER(3)                NOT NULL,
  FRQ_MEAN             NUMBER                   NOT NULL,
  FRQ_MAX              NUMBER                   NOT NULL,
  FRQ_MIN              NUMBER                   NOT NULL,
  FRQ_DEV              NUMBER                   NOT NULL,
  PRI_TYPE             NUMBER(1)                NOT NULL,
  PRI_PATTN_TYPE       NUMBER(1)                NOT NULL,
  HAS_PRI_MOD_PRD      NUMBER(1)                NOT NULL,
  PRI_MOD_PRD          NUMBER                   NOT NULL,
  NUM_OF_PRI_POSITION  NUMBER(3)                NOT NULL,
  NUM_OF_PRI_ELEMENT   NUMBER(3)                NOT NULL,
  PRI_MEAN             NUMBER                   NOT NULL,
  PRI_MAX              NUMBER                   NOT NULL,
  PRI_MIN              NUMBER                   NOT NULL,
  PRI_DEV              NUMBER                   NOT NULL,
  PRI_JITTER_RTO       NUMBER                   NOT NULL,
  PW_MEAN              NUMBER                   NOT NULL,
  PW_MIN               NUMBER                   NOT NULL,
  PW_MAX               NUMBER                   NOT NULL,
  PW_DEV               NUMBER                   NOT NULL,
  PA_MEAN              NUMBER                   NOT NULL,
  PA_MIN               NUMBER                   NOT NULL,
  PA_MAX               NUMBER                   NOT NULL,
  PA_DEV               NUMBER                   NOT NULL,
  SCAN_TYPE            NUMBER(1)                NOT NULL,
  SCAN_TYPE_DETAIL     NUMBER(1)                NOT NULL,
  SCAN_PRD             NUMBER                   NOT NULL,
  INTRA_TYPE           NUMBER(2)                NOT NULL,
  INTRA_TYPE_DETAIL    NUMBER(2)                NOT NULL,
  INTRA_FRQ_MEAN       NUMBER                   NOT NULL,
  INTRA_FRQ_MIN        NUMBER                   NOT NULL,
  INTRA_FRQ_MAX        NUMBER                   NOT NULL,
  INTRA_FRQ_DEVIATION  NUMBER                   NOT NULL,
  AIRCRAFT_LAT         NUMBER                   NOT NULL,
  AIRCRAFT_LONG        NUMBER                   NOT NULL,
  AIRCRAFT_PITCH       NUMBER                   NOT NULL,
  AIRCRAFT_ROLL        NUMBER                   NOT NULL,
  AIRCRAFT_HEADING     NUMBER                   NOT NULL,
  AIRCRAFT_ALT         NUMBER                   NOT NULL,
  AIRCRAFT_FOM         NUMBER                   NOT NULL,
  IS_VALIDITY          NUMBER(2)                NOT NULL
)
TABLESPACE EW701
RESULT_CACHE (MODE DEFAULT)
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MAXSIZE          UNLIMITED
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;

COMMENT ON TABLE EW701.E_ANAL_RESULT IS '분석결과';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.ANAL_RSLT_ID IS '분석결과ID(자동)';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.ACQ_TIME IS '수집시간';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.LOB_ID IS 'LOB ID';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.ABT_ID IS '빔 ID';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.AET_ID IS '위협 ID';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.SIG_TYPE IS '신호형태';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.NUM_OF_PULSES IS 'PDW분석개수';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.DOA_MEAN IS '방위평균';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.DOA_MIN IS '방위최소';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.DOA_MAX IS '방위최대';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.DOA_DEV IS '방위편차';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.FRQ_TYPE IS '주파수형태';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.HAS_FRQ_MOD_PRD IS '주파수변경주기';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.NUM_OF_FRQ_POSITION IS '주파수 포지션수';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.NUM_OF_FRQ_ELEMENT IS '주파수 단수';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.FRQ_MEAN IS '주파수평균';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.FRQ_MAX IS '주파수최대';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.FRQ_MIN IS '주파수최소';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.FRQ_DEV IS '주파수편차';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.PRI_TYPE IS 'PRI형태';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.PRI_MOD_PRD IS 'PRI변경주기';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.NUM_OF_PRI_POSITION IS 'PRI단수';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.PRI_MEAN IS 'PRI평균';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.PRI_MAX IS 'PRI최대';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.PRI_MIN IS 'PRI최소';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.PRI_JITTER_RTO IS 'PRI변경율';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.PW_MEAN IS 'PW평균';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.PW_MIN IS 'PW최소';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.PW_MAX IS 'PW최대';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.PA_MEAN IS 'PA평균';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.PA_MIN IS 'PA최소';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.PA_MAX IS 'PA최대';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.SCAN_TYPE IS '스캔형태';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.SCAN_PRD IS '스캔주기';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.INTRA_TYPE IS 'MOP형태';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.INTRA_FRQ_MEAN IS 'MOP주파수평균';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.INTRA_FRQ_MIN IS 'MOP주파수최소';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.INTRA_FRQ_MAX IS 'MOP주파수최대';

COMMENT ON COLUMN EW701.E_ANAL_RESULT.INTRA_FRQ_DEVIATION IS 'MOP주파수편차';


CREATE UNIQUE INDEX EW701.PK_E_ANAL_RESULT ON EW701.E_ANAL_RESULT
(ANAL_RSLT_ID)
LOGGING
TABLESPACE EW701
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MAXSIZE          UNLIMITED
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;

CREATE OR REPLACE TRIGGER EW701.AUTO_TRG_E_ANAL_RESLT 
BEFORE INSERT ON EW701.E_ANAL_RESULT
FOR EACH ROW
BEGIN
    SELECT AUTO_E_ANAL_RESULT.NEXTVAL
    INTO :NEW.ANAL_RSLT_ID
    FROM DUAL;
END;
/


ALTER TABLE EW701.E_ANAL_RESULT ADD (
  CONSTRAINT PK_E_ANAL_RESULT
  PRIMARY KEY
  (ANAL_RSLT_ID)
  USING INDEX EW701.PK_E_ANAL_RESULT
  ENABLE VALIDATE);
